<%= form_with(model: [chat_session, Message.new], 
              id: "new_message_form",
              data: { 
                controller: "reset-form", 
                action: "turbo:submit-end->reset-form#reset" 
              },
              class: "relative") do |f| %>
  
  <div class="flex items-end gap-2 bg-gray-100 p-2 rounded-xl border border-gray-300 focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-transparent transition-all">
    
    <%= f.text_area :content, 
        rows: 1,
        placeholder: "Escribe tu pregunta sobre el cÃ³digo...", 
        class: "w-full bg-transparent border-none focus:ring-0 resize-none max-h-32 py-2 text-sm text-gray-800 placeholder-gray-400",
        data: { controller: "textarea-resize" } # Opcional: para auto-expandir
    %>

    <%= f.button type: "submit", class: "p-2 bg-blue-600 rounded-lg text-white hover:bg-blue-700 transition flex-shrink-0 mb-[1px]" do %>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
        <path d="M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z" />
      </svg>
    <% end %>
  </div>
<% end %>